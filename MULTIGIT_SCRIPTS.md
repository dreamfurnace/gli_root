# GLI MultiGit Scripts ê°€ì´ë“œ

8ê°œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë™ì‹œì— ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ëª¨ìŒì…ë‹ˆë‹¤.

## ğŸ“ ë¦¬í¬ì§€í† ë¦¬ ëª©ë¡

ìŠ¤í¬ë¦½íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” 8ê°œ ë¦¬í¬ì§€í† ë¦¬:
1. `gli_root` (ë©”ì¸ í”„ë¡œì íŠ¸ ë£¨íŠ¸)
2. `gli_admin-frontend` (ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ)
3. `gli_api-server` (Django REST API)
4. `gli_database` (ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •)
5. `gli_rabbitmq` (RabbitMQ ì„¤ì •)
6. `gli_redis` (Redis ì„¤ì •)
7. `gli_user-frontend` (ì‚¬ìš©ì í”„ë¡ íŠ¸ì—”ë“œ)
8. `gli_websocket` (WebSocket ì„œë²„)

## ğŸ”„ ë¸Œëœì¹˜ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GLI Branch Flow                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    dev (ê°œë°œ)
     â†“ multigit-merge-dev-to-stg.sh
    stg (ìŠ¤í…Œì´ì§•) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â†“                      â”‚ multigit-merge-stg-to-dev.sh
     â†“                      â†“
     â†“ multigit-merge-stg-to-main.sh
    main (í”„ë¡œë•ì…˜)
     â†“
     â†“ multigit-merge-main-to-stg.sh (í•«í”½ìŠ¤)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ stg (ì—­ë°©í–¥)
```

## ğŸ“œ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡ (ì´ 9ê°œ)

### 1. ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸ (Pull)

#### `multigit-pull-dev.sh`
```bash
./multigit-pull-dev.sh
```
- **ê¸°ëŠ¥**: ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ì˜ dev ë¸Œëœì¹˜ë¥¼ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
- **ì‚¬ìš© ì‹œê¸°**: íŒ€ì›ë“¤ì˜ ìµœì‹  ê°œë°œ ì‘ì—…ì„ ë°›ì•„ì˜¬ ë•Œ
- **ìë™ ì‹¤í–‰**: ì¶©ëŒ ì—†ìœ¼ë©´ ìë™ ì™„ë£Œ

#### `multigit-pull-stg.sh`
```bash
./multigit-pull-stg.sh
```
- **ê¸°ëŠ¥**: ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ì˜ stg ë¸Œëœì¹˜ë¥¼ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
- **ì‚¬ìš© ì‹œê¸°**: ìŠ¤í…Œì´ì§• í™˜ê²½ ì‘ì—… ì „ ë™ê¸°í™”
- **ìë™ ì‹¤í–‰**: ì¶©ëŒ ì—†ìœ¼ë©´ ìë™ ì™„ë£Œ

#### `multigit-pull-main.sh`
```bash
./multigit-pull-main.sh
```
- **ê¸°ëŠ¥**: ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ì˜ main ë¸Œëœì¹˜ë¥¼ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
- **ì‚¬ìš© ì‹œê¸°**: í”„ë¡œë•ì…˜ ì½”ë“œ í™•ì¸ ì‹œ

### 2. í‘¸ì‹œ ìŠ¤í¬ë¦½íŠ¸ (Push)

#### `multigit-push-stg.sh`
```bash
./multigit-push-stg.sh
```
- **ê¸°ëŠ¥**: ë¡œì»¬ stg ë¸Œëœì¹˜ì˜ ì»¤ë°‹ì„ ì›ê²©ì— í‘¸ì‹œ
- **ì‚¬ìš© ì‹œê¸°**: stg ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ ì‘ì—… í›„ ë°°í¬
- **í™•ì¸ í•„ìš”**: yes ì…ë ¥ í•„ìš”
- **ìë™ ë°°í¬**: âœ… ìŠ¤í…Œì´ì§• í™˜ê²½ ìë™ ë°°í¬ íŠ¸ë¦¬ê±°
- **íŠ¹ì§•**: í‘¸ì‹œí•  ì»¤ë°‹ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ê±´ë„ˆëœ€

#### `multigit-push-main.sh`
```bash
./multigit-push-main.sh
```
- **ê¸°ëŠ¥**: ë¡œì»¬ main ë¸Œëœì¹˜ì˜ ì»¤ë°‹ì„ ì›ê²©ì— í‘¸ì‹œ
- **ì‚¬ìš© ì‹œê¸°**: ë§¤ìš° ì œí•œì  (ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš© ì•ˆ í•¨)
- **í™•ì¸ í•„ìš”**: DEPLOY ì…ë ¥ í•„ìš”

### 3. ë¨¸ì§€ ìŠ¤í¬ë¦½íŠ¸ (Merge)

#### `multigit-merge-dev-to-stg.sh`
```bash
./multigit-merge-dev-to-stg.sh
```
- **ê¸°ëŠ¥**: dev â†’ stg ë¨¸ì§€ (ì •ë°©í–¥)
- **ì‚¬ìš© ì‹œê¸°**: ê°œë°œ ì™„ë£Œ í›„ ìŠ¤í…Œì´ì§• ë°°í¬
- **í™•ì¸ í•„ìš”**: yes ì…ë ¥ í•„ìš”
- **ìë™ ë°°í¬**: âœ… ìŠ¤í…Œì´ì§• í™˜ê²½ ìë™ ë°°í¬
- **ì¶©ëŒ ì²˜ë¦¬**: ìë™ ê°ì§€ ë° ìˆ˜ë™ í•´ê²° ê°€ì´ë“œ ì œê³µ

#### `multigit-merge-stg-to-main.sh`
```bash
./multigit-merge-stg-to-main.sh
```
- **ê¸°ëŠ¥**: stg â†’ main ë¨¸ì§€ (ì •ë°©í–¥)
- **ì‚¬ìš© ì‹œê¸°**: ìŠ¤í…Œì´ì§• ê²€ì¦ ì™„ë£Œ í›„ í”„ë¡œë•ì…˜ ë°°í¬
- **í™•ì¸ í•„ìš”**: yes + DEPLOY ì…ë ¥ (ì´ì¤‘ í™•ì¸)
- **ìë™ ë°°í¬**: âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ìë™ ë°°í¬
- **íŠ¹ì§•**: ë°°í¬ íƒœê·¸ ìë™ ìƒì„± (deploy-YYYYMMDD-HHMMSS)
- **ë¡œê¹…**: deployment.logì— ë°°í¬ ê¸°ë¡ ì €ì¥

#### `multigit-merge-stg-to-dev.sh` â­ NEW
```bash
./multigit-merge-stg-to-dev.sh
```
- **ê¸°ëŠ¥**: stg â†’ dev ë¨¸ì§€ (ì—­ë°©í–¥)
- **ì‚¬ìš© ì‹œê¸°**:
  - ìŠ¤í…Œì´ì§•ì—ì„œ ì¶”ê°€ ìˆ˜ì •/ê²€ì¦ì´ ì´ë£¨ì–´ì§„ ê²½ìš°
  - ìŠ¤í…Œì´ì§•ì—ì„œ í•«í”½ìŠ¤ë¥¼ ë°›ì•„ devì—ë„ ë°˜ì˜í•  ë•Œ
  - devì™€ stg ë¸Œëœì¹˜ë¥¼ ë™ê¸°í™”í•  ë•Œ
- **í™•ì¸ í•„ìš”**: yes ì…ë ¥ í•„ìš”
- **íŠ¹ì§•**: ì»¤ë°‹ ì°¨ì´ í™•ì¸ í›„ ë™ê¸°í™” í•„ìš” ì—¬ë¶€ íŒë‹¨

#### `multigit-merge-main-to-stg.sh`
```bash
./multigit-merge-main-to-stg.sh
```
- **ê¸°ëŠ¥**: main â†’ stg ë¨¸ì§€ (ì—­ë°©í–¥)
- **ì‚¬ìš© ì‹œê¸°**: í”„ë¡œë•ì…˜ í•«í”½ìŠ¤ë¥¼ ìŠ¤í…Œì´ì§•ì— ë°˜ì˜
- **í™•ì¸ í•„ìš”**: yes ì…ë ¥ í•„ìš”
- **ìë™ ë°°í¬**: âœ… ìŠ¤í…Œì´ì§• í™˜ê²½ ìë™ ë°°í¬
- âš ï¸ **ì£¼ì˜**: ì—­ë°©í–¥ ë¨¸ì§€ì´ë¯€ë¡œ íŠ¹ë³„í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©

## ğŸ¯ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ê°œë°œ & ë°°í¬ íë¦„

```bash
# 1. ìµœì‹  dev ë¸Œëœì¹˜ ë°›ì•„ì˜¤ê¸°
./multigit-pull-dev.sh

# 2. ê° ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ê°œë°œ ì‘ì—…
cd gli_api-server
git checkout -b feature/new-api
# ... ê°œë°œ ...
git commit -m "feat: add new API endpoint"
git checkout dev
git merge feature/new-api
cd ..

# 3. ìŠ¤í…Œì´ì§• ë°°í¬
./multigit-merge-dev-to-stg.sh

# 4. ìŠ¤í…Œì´ì§• í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸
# (https://stg.glibiz.com, https://stg-api.glibiz.com ë“±)

# 5. í”„ë¡œë•ì…˜ ë°°í¬
./multigit-merge-stg-to-main.sh
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ìŠ¤í…Œì´ì§•ì—ì„œ ì¶”ê°€ ìˆ˜ì • í›„ dev ë™ê¸°í™”

```bash
# 1. ìŠ¤í…Œì´ì§• ë°°í¬ í›„ ë²„ê·¸ ë°œê²¬
./multigit-pull-stg.sh

# 2. stg ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ ìˆ˜ì •
cd gli_api-server
git checkout stg
# ... ë²„ê·¸ ìˆ˜ì • ...
git commit -m "fix: resolve staging bug"
cd ..

# 3. ìˆ˜ì •ì‚¬í•­ ìŠ¤í…Œì´ì§•ì— ë°°í¬
./multigit-push-stg.sh

# 4. ê²€ì¦ ì™„ë£Œ í›„ devì— ë°˜ì˜
./multigit-merge-stg-to-dev.sh

# 5. í•„ìš”ì‹œ í”„ë¡œë•ì…˜ ë°°í¬
./multigit-merge-stg-to-main.sh
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: í”„ë¡œë•ì…˜ ê¸´ê¸‰ í•«í”½ìŠ¤

```bash
# 1. mainì—ì„œ hotfix ë¸Œëœì¹˜ ìƒì„±
cd gli_api-server
git checkout main
git pull origin main
git checkout -b hotfix/critical-security-fix
# ... ê¸´ê¸‰ ìˆ˜ì • ...
git commit -m "hotfix: patch security vulnerability"

# 2. mainìœ¼ë¡œ PR ìƒì„± ë° ë¨¸ì§€
# (GitHubì—ì„œ PR ìƒì„± â†’ ë¦¬ë·° â†’ ë¨¸ì§€)

# 3. í•«í”½ìŠ¤ë¥¼ ìŠ¤í…Œì´ì§•ì— ë°˜ì˜
./multigit-merge-main-to-stg.sh

# 4. í•«í”½ìŠ¤ë¥¼ devì—ë„ ë°˜ì˜
./multigit-merge-stg-to-dev.sh
# ë˜ëŠ” ê° ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ
cd gli_api-server
git checkout dev
git merge main
git push origin dev
```

### ì‹œë‚˜ë¦¬ì˜¤ 4: íŒ€ í˜‘ì—… - ë™ë£Œ ì‘ì—… ë°›ì•„ì˜¤ê¸°

```bash
# stg ë¸Œëœì¹˜ì—ì„œ íŒ€ì›ë“¤ì˜ ì‘ì—… ë°›ì•„ì˜¤ê¸°
./multigit-pull-stg.sh

# dev ë¸Œëœì¹˜ì—ì„œ íŒ€ì›ë“¤ì˜ ì‘ì—… ë°›ì•„ì˜¤ê¸°
./multigit-pull-dev.sh
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

### DO âœ…

1. **ë¨¸ì§€ ì „ í•­ìƒ pull ë¨¼ì €**
   ```bash
   ./multigit-pull-stg.sh  # ë¨¸ì§€ ì „ì— ìµœì‹  ìƒíƒœ í™•ì¸
   ./multigit-merge-dev-to-stg.sh
   ```

2. **ì¶©ëŒ ë°œìƒ ì‹œ ì¦‰ì‹œ í•´ê²°**
   - ìŠ¤í¬ë¦½íŠ¸ê°€ ì¤‘ë‹¨ë˜ë©´ ì•ˆë‚´ëœ ëª…ë ¹ì–´ë¡œ í•´ê²°
   - í•´ê²° í›„ ìˆ˜ë™ìœ¼ë¡œ push

3. **ë°°í¬ ì „ í™•ì¸ ì‚¬í•­ ì²´í¬**
   - ìŠ¤í…Œì´ì§•: ê¸°ëŠ¥ ë™ì‘ í™•ì¸
   - í”„ë¡œë•ì…˜: ì‚¬ìš©ì ì˜í–¥ ìµœì†Œí™” ì‹œê°„ëŒ€ ì„ íƒ

### DON'T âŒ

1. **ì ˆëŒ€ force push ê¸ˆì§€**
   ```bash
   # ì´ë ‡ê²Œ í•˜ì§€ ë§ˆì„¸ìš”!
   git push -f origin main
   git push --force origin stg
   ```

2. **ì¶©ëŒ ë¬´ì‹œí•˜ê³  ì§„í–‰ ê¸ˆì§€**
   - ì¶©ëŒì´ ë°œìƒí•˜ë©´ ë°˜ë“œì‹œ í•´ê²° í›„ ì§„í–‰

3. **í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ê°€ë³ê²Œ ìƒê°í•˜ì§€ ì•Šê¸°**
   - `multigit-merge-stg-to-main.sh`ëŠ” ì‹ ì¤‘í•˜ê²Œ ì‹¤í–‰

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ë¨¸ì§€ ì¶©ëŒ ë°œìƒ

```bash
# ìŠ¤í¬ë¦½íŠ¸ê°€ ì•Œë ¤ì¤€ ë¦¬í¬ì§€í† ë¦¬ë¡œ ì´ë™
cd gli_api-server
git status

# ì¶©ëŒ íŒŒì¼ í™•ì¸
git diff

# ì¶©ëŒ í•´ê²° í›„
git add .
git commit
git push origin stg  # ë˜ëŠ” í•´ë‹¹ ë¸Œëœì¹˜
```

### ë¬¸ì œ 2: ì¼ë¶€ ë¦¬í¬ì§€í† ë¦¬ë§Œ ì‹¤íŒ¨

```bash
# ì‹¤íŒ¨í•œ ë¦¬í¬ì§€í† ë¦¬ë§Œ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬
cd failed-repo
git checkout target-branch
git merge source-branch
# ì¶©ëŒ í•´ê²°
git push origin target-branch
```

### ë¬¸ì œ 3: ë¸Œëœì¹˜ê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬

```bash
# í•´ë‹¹ ë¦¬í¬ì§€í† ë¦¬ì— ë¸Œëœì¹˜ ìƒì„±
cd problematic-repo
git checkout -b stg
git push -u origin stg
```

### ë¬¸ì œ 4: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ

```bash
chmod +x multigit-*.sh
```

## ğŸ“Š ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼ ì´í•´í•˜ê¸°

### ì„±ê³µ ì¶œë ¥ ì˜ˆì‹œ
```
================================================
Summary
================================================
âœ… ì„±ê³µí•œ ë¦¬í¬ì§€í† ë¦¬ (8):
  - gli_root
  - gli_admin-frontend
  - gli_api-server
  - gli_database
  - gli_rabbitmq
  - gli_redis
  - gli_user-frontend
  - gli_websocket
```

### ë¶€ë¶„ ì‹¤íŒ¨ ì¶œë ¥ ì˜ˆì‹œ
```
================================================
Summary
================================================
âœ… ì„±ê³µí•œ ë¦¬í¬ì§€í† ë¦¬ (6):
  - gli_root
  - ...

â­ï¸  ê±´ë„ˆë›´ ë¦¬í¬ì§€í† ë¦¬ (1):
  - gli_database (no new commits)

âŒ ì‹¤íŒ¨í•œ ë¦¬í¬ì§€í† ë¦¬ (1):
  - gli_api-server

âš ï¸  ì‹¤íŒ¨í•œ ë¦¬í¬ì§€í† ë¦¬ì˜ ì¶©ëŒì„ í•´ê²°í•œ í›„ ìˆ˜ë™ìœ¼ë¡œ í‘¸ì‹œí•˜ì„¸ìš”.
```

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- `BRANCHING.md` - ë¸Œëœì¹˜ ì „ëµ ìƒì„¸ ê°€ì´ë“œ
- `SECRETS_MANAGEMENT.md` - Secrets ê´€ë¦¬ ê°€ì´ë“œ
- ê° ë¦¬í¬ì§€í† ë¦¬ì˜ `.github/workflows/README.md` - CI/CD ì„¤ì •

## ğŸ“ ë„ì›€ë§

ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì½ê¸°
2. ì œì•ˆëœ í•´ê²° ë°©ë²• ì‹œë„
3. í•´ê²° ì•ˆ ë˜ë©´ íŒ€ì›ì—ê²Œ ë¬¸ì˜

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-13
**ê´€ë¦¬**: DevOps Team
